!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react")):"function"==typeof define&&define.amd?define(["react"],r):"object"==typeof exports?exports.AsyncProps=r(require("react")):e.AsyncProps=r(e.React)}(this,function(e){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,r){var n={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function s(e){return e[e.length-1]}function u(e,r){for(var n=0,t=e.length;t>n;n++)if("object"==typeof e[n])for(var o in e[n])r(e[n][o],n,o);else r(e[n],n)}function p(e){var r=[];return u(e,function(e){e.loadProps&&r.push(e)}),r}function l(e,r,n){var t=[],o=[],a=e.length,i=function(){0===a&&n(null,{propsArray:o,componentsArray:t})};return 0===a?i():void e.forEach(function(e,n){e.loadProps(r,function(r,s){a--,o[n]=s,t[n]=e,i()})})}function c(e,r){var n=r.componentsArray,t=r.propsArray,o=n.indexOf(e);return t[o]}function f(e,r){for(var n=0,t=r.propsArray.length;t>n;n++){var o=r.componentsArray[n],a=e.componentsArray.indexOf(o),i=-1===a;i?(e.propsArray.push(r.propsArray[n]),e.componentsArray.push(r.componentsArray[n])):e.propsArray[a]=r.propsArray[n]}return e}function d(e,r){for(var n=[],t=0,o=r.length;o>t;t++)-1===e.indexOf(r[t])&&n.push(r[t]);return n}function m(e,r){var n,t=0,o=0;for(n in e){if(e.hasOwnProperty(n)&&e[n]!==r[n])return!1;t++}for(n in r)r.hasOwnProperty(n)&&o++;return t===o}function h(e,r){return e.loadProps?E["default"].createElement(C,{Component:e,routerProps:r}):E["default"].createElement(e,r)}function y(e,r){var n=e.components,t=e.params;l(p(n),t,function(e,n){if(e)r(e);else{var t=JSON.stringify(n.propsArray,null,2),o="<script>__ASYNC_PROPS__ = "+t+"</script>";r(null,n,o)}})}function v(e){return"undefined"!=typeof __ASYNC_PROPS__?{propsArray:__ASYNC_PROPS__,componentsArray:p(e.components)}:null}r.__esModule=!0;var g=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},P=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}();r.loadPropsOnServer=y;var A=n(2),E=t(A),_=n(6),w=t(_),b=E["default"].PropTypes,O=b.array,x=b.func,R=b.object,C=function(e){function r(){a(this,r),e.apply(this,arguments)}return i(r,e),r.prototype.render=function(){var e=this.props,r=e.Component,n=e.routerProps,t=o(e,["Component","routerProps"]),a=this.context.asyncProps,i=a.propsAndComponents,s=a.loading,u=a.reloadComponent,p=c(r,i),l=function(){return u(r)};return E["default"].createElement(r,g({},t,n,p,{reloadAsyncProps:l,loading:s}))},P(r,null,[{key:"propTypes",value:{Component:x.isRequired,routerProps:R.isRequired},enumerable:!0},{key:"contextTypes",value:{asyncProps:R.isRequired},enumerable:!0}]),r}(E["default"].Component),N=function(e){function r(n,t){a(this,r),e.call(this,n,t);var o=this.props,i=o.propsArray,s=o.componentsArray,u=i&&s;this.state={loading:!1,prevProps:null,propsAndComponents:u?{propsArray:i,componentsArray:s}:v(n)}}return i(r,e),P(r,null,[{key:"childContextTypes",value:{asyncProps:R},enumerable:!0},{key:"propTypes",value:{components:O.isRequired,params:R.isRequired,location:R.isRequired,onError:x.isRequired,renderLoading:x.isRequired,propsArray:O,componentsArray:O},enumerable:!0},{key:"defaultProps",value:{onError:function(e){throw e},renderLoading:function(){return null}},enumerable:!0}]),r.prototype.getChildContext=function(){var e=this,r=this.state,n=r.loading,t=r.propsAndComponents;return{asyncProps:{loading:n,propsAndComponents:t,reloadComponent:function(r){e.reloadComponent(r)}}}},r.prototype.componentDidMount=function(){var e=this.props,r=e.components,n=e.params,t=e.location;this.loadAsyncProps(r,n,t)},r.prototype.componentWillReceiveProps=function(e){var r=e.location!==this.props.location;if(r){var n=p(this.props.components),t=p(e.components),o=d(n,t);if(0===o.length){var a=m(n,t);if(a){var i=!m(e.params,this.props.params);i&&(o=[s(t)])}}o.length>0&&this.loadAsyncProps(o,e.params,e.location)}},r.prototype.handleError=function(e){var r=this;return function(n){for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;t>a;a++)o[a-1]=arguments[a];n&&r.props.onError?r.props.onError(n):e.apply(void 0,[null].concat(o))}},r.prototype.componentWillUnmount=function(){this._unmounted=!0},r.prototype.loadAsyncProps=function(e,r,n,t){var o=this;this.setState({loading:!0,prevProps:this.props}),l(p(e),r,this.handleError(function(e,r){var a=t&&t.force,i=o.props.location===n;!a&&!i||o._unmounted||(o.state.propsAndComponents&&(r=f(o.state.propsAndComponents,r)),o.setState({loading:!1,propsAndComponents:r,prevProps:null}))}))},r.prototype.reloadComponent=function(e){var r=this.props.params;this.loadAsyncProps([e],r,null,{force:!0})},r.prototype.render=function(){var e=this.state.propsAndComponents;if(e){var r=this.state.loading?this.state.prevProps:this.props;return E["default"].createElement(w["default"],g({},r,{createElement:h}))}return this.props.renderLoading()},r}(E["default"].Component);r["default"]=N},function(e,r){function n(){p=!1,i.length?u=i.concat(u):l=-1,u.length&&t()}function t(){if(!p){var e=setTimeout(n);p=!0;for(var r=u.length;r;){for(i=u,u=[];++l<r;)i&&i[l].run();l=-1,r=u.length}i=null,p=!1,clearTimeout(e)}}function o(e,r){this.fun=e,this.array=r}function a(){}var i,s=e.exports={},u=[],p=!1,l=-1;s.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];u.push(new o(e,r)),1!==u.length||p||setTimeout(t,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(r,n){r.exports=e},function(e,r,n){(function(r){"use strict";var n=function(e,n,t,o,a,i,s,u){if("production"!==r.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var p;if(void 0===n)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[t,o,a,i,s,u],c=0;p=new Error(n.replace(/%s/g,function(){return l[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};e.exports=n}).call(r,n(1))},function(e,r,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return o(e).replace(/\/+/g,"/+")}function i(e){for(var r="",n=[],t=[],o=void 0,i=0,s=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;o=s.exec(e);)o.index!==i&&(t.push(e.slice(i,o.index)),r+=a(e.slice(i,o.index))),o[1]?(r+="([^/?#]+)",n.push(o[1])):"**"===o[0]?(r+="([\\s\\S]*)",n.push("splat")):"*"===o[0]?(r+="([\\s\\S]*?)",n.push("splat")):"("===o[0]?r+="(?:":")"===o[0]&&(r+=")?"),t.push(o[0]),i=s.lastIndex;return i!==e.length&&(t.push(e.slice(i,e.length)),r+=a(e.slice(i,e.length))),{pattern:e,regexpSource:r,paramNames:n,tokens:t}}function s(e){return e in m||(m[e]=i(e)),m[e]}function u(e,r){"/"!==e.charAt(0)&&(e="/"+e),"/"!==r.charAt(0)&&(r="/"+r);var n=s(e),t=n.regexpSource,o=n.paramNames,a=n.tokens;t+="/*";var i="*"!==a[a.length-1];i&&(t+="([\\s\\S]*?)");var u=r.match(new RegExp("^"+t+"$","i")),p=void 0,l=void 0;if(null!=u){if(i){p=u.pop();var c=u[0].substr(0,u[0].length-p.length);if(p&&"/"!==c.charAt(c.length-1))return{remainingPathname:null,paramNames:o,paramValues:null}}else p="";l=u.slice(1).map(function(e){return null!=e?decodeURIComponent(e):e})}else p=l=null;return{remainingPathname:p,paramNames:o,paramValues:l}}function p(e){return s(e).paramNames}function l(e,r){var n=u(e,r),t=n.paramNames,o=n.paramValues;return null!=o?t.reduce(function(e,r,n){return e[r]=o[n],e},{}):null}function c(r,n){n=n||{};for(var t=s(r),o=t.tokens,a=0,i="",u=0,p=void 0,l=void 0,c=void 0,f=0,m=o.length;m>f;++f)p=o[f],"*"===p||"**"===p?(c=Array.isArray(n.splat)?n.splat[u++]:n.splat,null!=c||a>0?void 0:"production"!==e.env.NODE_ENV?d["default"](!1,'Missing splat #%s for path "%s"',u,r):d["default"](!1),null!=c&&(i+=encodeURI(c))):"("===p?a+=1:")"===p?a-=1:":"===p.charAt(0)?(l=p.substring(1),c=n[l],null!=c||a>0?void 0:"production"!==e.env.NODE_ENV?d["default"](!1,'Missing "%s" parameter for path "%s"',l,r):d["default"](!1),null!=c&&(i+=encodeURIComponent(c))):i+=p;return i.replace(/\/+/g,"/")}r.__esModule=!0,r.compilePattern=s,r.matchPattern=u,r.getParamNames=p,r.getParams=l,r.formatPattern=c;var f=n(3),d=t(f),m={}}).call(r,n(1))},function(e,r,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){return null==e||d["default"].isValidElement(e)}function a(e){return o(e)||Array.isArray(e)&&e.every(o)}function i(r,n,t){r=r||"UnknownComponent";for(var o in n)if(n.hasOwnProperty(o)){var a=n[o](t,o,r);a instanceof Error&&("production"!==e.env.NODE_ENV?h["default"](!1,a.message):void 0)}}function s(e,r){return c({},e,r)}function u(e){var r=e.type,n=s(r.defaultProps,e.props);if(r.propTypes&&i(r.displayName||r.name,r.propTypes,n),n.children){var t=p(n.children,n);t.length&&(n.childRoutes=t),delete n.children}return n}function p(e,r){var n=[];return d["default"].Children.forEach(e,function(e){if(d["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var t=e.type.createRouteFromReactElement(e,r);t&&n.push(t)}else n.push(u(e))}),n}function l(e){return a(e)?e=p(e):e&&!Array.isArray(e)&&(e=[e]),e}r.__esModule=!0;var c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};r.isReactChildren=a,r.createRouteFromReactElement=u,r.createRoutesFromReactChildren=p,r.createRoutes=l;var f=n(2),d=t(f),m=n(8),h=t(m)}).call(r,n(1))},function(e,r,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}r.__esModule=!0;var s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u=n(3),p=o(u),l=n(2),c=o(l),f=n(5),d=n(7),m=o(d),h=c["default"].PropTypes,y=h.array,v=h.func,g=h.object,P=function(e){function r(){a(this,r),e.apply(this,arguments)}return i(r,e),r.prototype.getChildContext=function(){var e=this.props,r=e.history,n=e.location;return{history:r,location:n}},r.prototype.createElement=function(e,r){return null==e?null:this.props.createElement(e,r)},r.prototype.render=function(){var e=this,r=this.props,n=r.history,o=r.location,a=r.routes,i=r.params,u=r.components,l=null;return u&&(l=u.reduceRight(function(r,t,u){if(null==t)return r;var p=a[u],l=m["default"](p,i),c={history:n,location:o,params:i,route:p,routeParams:l,routes:a};if(f.isReactChildren(r))c.children=r;else if(r)for(var d in r)r.hasOwnProperty(d)&&(c[d]=r[d]);if("object"==typeof t){var h={};for(var y in t)t.hasOwnProperty(y)&&(h[y]=e.createElement(t[y],s({key:y},c)));return h}return e.createElement(t,c)},l)),null===l||l===!1||c["default"].isValidElement(l)?void 0:"production"!==t.env.NODE_ENV?p["default"](!1,"The root route must render a single element"):p["default"](!1),l},r}(l.Component);P.propTypes={history:g.isRequired,createElement:v.isRequired,location:g.isRequired,routes:y.isRequired,params:g.isRequired,components:y.isRequired},P.defaultProps={createElement:c["default"].createElement},P.childContextTypes={history:g.isRequired,location:g.isRequired},r["default"]=P,e.exports=r["default"]}).call(r,n(1))},function(e,r,n){"use strict";function t(e,r){var n={};if(!e.path)return n;var t=o.getParamNames(e.path);for(var a in r)r.hasOwnProperty(a)&&-1!==t.indexOf(a)&&(n[a]=r[a]);return n}r.__esModule=!0;var o=n(4);r["default"]=t,e.exports=r["default"]},function(e,r,n){(function(r){"use strict";var n=function(){};"production"!==r.env.NODE_ENV&&(n=function(e,r,n){var t=arguments.length;n=new Array(t>2?t-2:0);for(var o=2;t>o;o++)n[o-2]=arguments[o];if(void 0===r)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(r.length<10||/^[s\W]*$/.test(r))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+r);if(!e){var a=0,i="Warning: "+r.replace(/%s/g,function(){return n[a++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(s){}}}),e.exports=n}).call(r,n(1))}])});